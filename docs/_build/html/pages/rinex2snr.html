<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>rinex2snr &mdash; gnssrefl  documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> gnssrefl
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="understand.html">Understanding</a></li>
<li class="toctree-l1"><a class="reference internal" href="README_install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="func_and_utils_doc.html">Workflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="../source/modules.html">gnssrefl API Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="first_drivethru.html">gnssrefl Use Cases</a></li>
<li class="toctree-l1"><a class="reference internal" href="news.html">News <a name="news"></a></a></li>
<li class="toctree-l1"><a class="reference internal" href="news.html#bugs-features-a-name-bugs-a">Bugs/Features <a name="bugs"></a></a></li>
<li class="toctree-l1"><a class="reference internal" href="contributions_questions.html">Community and Questions</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">gnssrefl</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
      <li>rinex2snr</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/pages/rinex2snr.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<section id="rinex2snr">
<h1>rinex2snr<a class="headerlink" href="#rinex2snr" title="Permalink to this heading"></a></h1>
<p>Extracting SNR data from RINEX/NMEA files <a name="module1"></a></p>
<p>The international standard for sharing GNSS data is called the <a class="reference external" href="https://www.ngs.noaa.gov/CORS/RINEX211.txt">RINEX format</a>. (If you are using NMEA files, please see the bottom of this section).
A RINEX file has extraneous information in it (which we will throw out) - and it
does not provide some of the information needed for reflectometry (e.g. elevation and azimuth angles).
The first task you have in GNSS-IR is to translate from RINEX into what I will call
the <strong>SNR format</strong>. The latter will include azimuth and elevation angles. To compute these
angles you will need an <strong>orbit</strong> file. <code>rinex2snr</code> will try to get an orbit file for you. It will save
those orbit files in case you want to use them at some later date. You can override the default orbit
choice by selections given below.</p>
<p>There is no reason to save ALL the RINEX data as the reflections are only useful at the lower elevation
angles. The default is to save all data with elevation lower than 30 degrees (this is called SNR format 66).
Another SNR choice is 99, which saves elevation angle data between 5 and 30.</p>
<p>You can run <code>rinex2snr</code> at the command line. The required inputs are:</p>
<ul class="simple">
<li><p>station name</p></li>
<li><p>year</p></li>
<li><p>day of year</p></li>
</ul>
<p>A sample call for a station called <code>p041</code>, restricted to
GPS satellites, on day of year 132 and year 2020 would be:</p>
<p><code>rinex2snr p041 2020 132</code></p>
<p>If the RINEX file for <code>p041</code> is in your local directory, it will translate it.  If not,
it will check three archives (unavco, sopac, and sonel) to find it.</p>
<p><strong>Examples for different translators:</strong></p>
<p>Using hybrid (the default):</p>
<p><code>rinex2snr gls1 2011 271</code></p>
<p>For a fortran translator, the command would be:</p>
<p><code>rinex2snr p041 2020 132 -translator fortran</code></p>
<p>For python (very slow!):</p>
<p><code>rinex2snr p041 2020 132 -translator python</CODE></p>
<p><strong>Allowed GNSS Rinex 2.11 Data Archives:</strong></p>
<ul class="simple">
<li><p>unavco</p></li>
<li><p>sonel (global sea level observing system)</p></li>
<li><p>sopac (Scripps Orbit and Permanent Array Center)</p></li>
<li><p>cddis (only Hatanaka compressed files)</p></li>
<li><p>ngs (National Geodetic Survey)</p></li>
<li><p>nrcan (Natural Resources Canada)</p></li>
<li><p>bkg (German Agency for Cartography and Geodesy)</p></li>
<li><p>nz (GNS, New Zealand)</p></li>
<li><p>ga (Geoscience Australia)</p></li>
<li><p>bev (Austria Federal Office of Metrology and Surveying)</p></li>
<li><p>jp (Geospatial Information Authority of Japan)</p></li>
</ul>
<p><strong>Example setting the archive:</strong></p>
<p><code>rinex2snr tgho 2020 132 -archive nz</code></p>
<p><strong>Example using the Japanese GNSS archive:</strong></p>
<p>The Geospatial Institute of Japan uses 6 numbers to specify
station names. You will be prompted for a username and password.
This will be saved on your computer for future use. Since gnssrefl
only uses four character statiion names, the last four values will be used as the station name.</p>
<p><code> rinex2snr 940050 2021 31 -archive jp </code></p>
<p><strong>Run the code for all the data for any year</strong></p>
<p><code>rinex2snr tgho 2019 1  -archive nz -doy_end 365</code></p>
<p><strong>Examples using RINEX 3:</strong></p>
<p>If your station name has 9 characters (lower case please), the code assumes you are looking for
a RINEX 3 file. However, my code will store the SNR data using the normal
4 character name. <em>You must install the gfzrnx executable that translates RINEX 3 to 2 to
use RINEX 3 files in this code.</em> If you followed the instructions for installation, this
is already taken care of.</p>
<p><code>rinex2snr</code> currently supports RINEX3 for 30 second data at :</p>
<ul class="simple">
<li><p>unavco</p></li>
<li><p>cddis</p></li>
<li><p>bev</p></li>
<li><p>bkg</p></li>
<li><p>epn</p></li>
<li><p>ga</p></li>
<li><p>bfg</p></li>
<li><p>sonel</p></li>
</ul>
<p>The caveat is that UNAVCO is set to 15 sec because that is mostly what is there.
If you don’t know where your data are, you can try <code>-archive all</code>,
which should try all archives in sequence. I believe the default archive is cddis.</p>
<p><code>rinex2snr onsa00swe 2020 298</code></p>
<p><code>rinex2snr at0100usa 2020 55</code></p>
<p><code>rinex2snr pots00deu 2020 298 -archive bkg</code></p>
<p><code>rinex2snr mchl00aus 2022 55 -archive ga</code></p>
<p>RINEX 3 has a file ID parameter that is a nuisance. If you know yours, you can set it
with <code>-stream R</code> or <code>-stream S</code>. Because I think it is an
annoying thing, I look for both files without you having to set it.</p>
<p>The snr options are mostly based on the need to remove the “direct” signal. This is
not related to a specific site mask and that is why the most frequently used
options (99 and 66) have a maximum elevation angle of 30 degrees. The
azimuth-specific mask is decided later when you run <code>gnssir</code>.  The SNR choices are:</p>
<ul class="simple">
<li><p>66 is elevation angles less than 30 degrees (<strong>this is the default</strong>)</p></li>
<li><p>99 is elevation angles of 5-30 degrees</p></li>
<li><p>88 is elevation angles of 5-90 degrees</p></li>
<li><p>50 is elevation angles less than 10 degrees (good for very tall sites, high-rate applications)</p></li>
</ul>
<p><strong>More options:</strong></p>
<p><em>orbit file options for general users:</em></p>
<ul class="simple">
<li><p>gps : will use GPS broadcast orbits (<strong>this is the default</strong>)</p></li>
<li><p>gps+glo : uses rapid GFZ orbits</p></li>
<li><p>gnss : uses GFZ orbits, which is multi-GNSS (available in 3-4 days?)</p></li>
<li><p>rapid : uses GFZ multi-GNSS rapid orbits, available in ~1 day</p></li>
<li><p>ultra : since mid-2021, we can use multi-GNSS near realtime orbits from GFZ</p></li>
</ul>
<p><em>orbit file options for experts:</em></p>
<ul class="simple">
<li><p>nav : GPS broadcast, perfectly adequate for reflectometry.</p></li>
<li><p>igs : IGS precise, GPS only</p></li>
<li><p>igr : IGS rapid, GPS only</p></li>
<li><p>jax : JAXA, GPS + Glonass, reliably within a few days, missing block III GPS satellites</p></li>
<li><p>gbm : GFZ Potsdam, multi-GNSS, not rapid (GPS, Galileo,Glonass, Beidou)</p></li>
<li><p>grg: French group, GPS, Galileo and Glonass, not rapid</p></li>
<li><p>esa : ESA, multi-GNSS</p></li>
<li><p>gfr : GFZ rapid, GPS, Galileo and Glonass, since May 17 2021</p></li>
<li><p>wum : Wuhan, multi-GNSS (precise+prediction, GPS,Galileo,Glonass,Beidou)</p></li>
<li><p>ultra : GFZ ultra rapid (GPS, Galileo, Glonass), since May 17, 2021</p></li>
</ul>
<p>We are likely to add access to multi-GNSS broadcast orbits, but for now you can use the
ultra orbit option. Although it is provided every three hours, we currently only download the
file from midnite (hour 0).</p>
<p><strong>What if you are providing the RINEX files and you don’t want the code to search for the files online?</strong>
<code>-nolook True</code></p>
<p>Just put the RINEX files in the same directory where you are running the code, using my naming rules (lower case for RINEX 2.11).</p>
<p><strong>What if you have high-rate (e.g. 1 sec) RINEX files, but you want 5 sec data?</strong> <code>-dec 5</code></p>
<p><strong>What if you want to use high-rate data?</strong>  <code>-rate high</code></p>
<p>If you invoke this flag, you need to specify the archive. Your choices for high-rate Rinex2 data are:</p>
<ul class="simple">
<li><p>UNAVCO</p></li>
<li><p>CDDIS</p></li>
<li><p>NRCAN</p></li>
</ul>
<p>For RINEX 3 high-rate data:</p>
<ul class="simple">
<li><p>CDDIS</p></li>
<li><p>GA</p></li>
<li><p>BKG</p></li>
</ul>
<p>For high-rate data, you should <strong>never</strong> use the python translation option.</p>
<p><strong>Output SNR file format</strong></p>
<p>To columns are defined as:</p>
<ol class="arabic simple">
<li><p>Satellite number (remember 100 is added for Glonass, etc)</p></li>
<li><p>Elevation angle, degrees</p></li>
<li><p>Azimuth angle, degrees</p></li>
<li><p>Seconds of the day, GPS time</p></li>
<li><p>elevation angle rate of change, degrees/sec.</p></li>
<li><p>S6 SNR on L6</p></li>
<li><p>S1 SNR on L1</p></li>
<li><p>S2 SNR on L2</p></li>
<li><p>S5 SNR on L5</p></li>
<li><p>S7 SNR on L7</p></li>
<li><p>S8 SNR on L8</p></li>
</ol>
<p>The unit for all SNR data is dB-Hz.</p>
<p><strong>Our names for the GNSS frequencies</strong></p>
<ul class="simple">
<li><p>1,2,20, and 5 are GPS L1, L2, L2C, and L5 (L2 and L2C are the same frequency - but we use different numbers in this code so that
one can <em>only</em> use L2C if wished)</p></li>
<li><p>101,102 are Glonass L1 and L2</p></li>
<li><p>201, 205, 206, 207, 208: Galileo frequencies, which are
set as 1575.420, 1176.450, 1278.70, 1207.140, 1191.795 MHz</p></li>
<li><p>302, 306, 307 : Beidou frequencies, defined as 1561.098, 1207.14, 1268.52 MHz</p></li>
</ul>
<p><strong>What if you want to analyze your own data?</strong></p>
<p>Put your RINEX 2.11 files in the directory where you are going to run the code.
They must have SNR data in them (S1, S2, etc) and have the receiver coordinates in the header.
The files should be named as follows:</p>
<ul class="simple">
<li><p>lowercase</p></li>
<li><p>station name (4 characters) followed by day of year (3 characters) then 0.yyo where yy is the two character year.</p></li>
<li><p>Example: algo0500.21o where station name is algo on day of year 50 from the year 2021</p></li>
</ul>
<p><code>rinex2snr algo 2021 50 -nolook True</code></p>
<p>If you have ss second RINEX 3 files, they should be all upper case (except for the extension).</p>
<ul class="simple">
<li><p>station name (9 characters where the last 3 characters are the country), underscore</p></li>
<li><p>capital R or capital S , underscore</p></li>
<li><p>four character year</p></li>
<li><p>three character day of year</p></li>
<li><p>four zeroes, underscore,</p></li>
<li><p>01D, underscore</p></li>
<li><p>ssS, underscore, M0.</p></li>
<li><p>followed by rnx (crx if it is Hatanaka format).</p></li>
</ul>
<p>01D means it is one day. Some of the other parts of the very long station file name are no
doubt useful, but they are not recognized by this code. By convention, these files may be
gzipped but not unix compressed.</p>
<p>Example filename: ONSA00SWE_R_20213050000_01D_30S_MO.rnx</p>
<p><code>rinex2snr onsa00swe 2021 305 -nolook True </code></p>
<p>If you have something other than 30 second sampling, use <code>-samplerate</code>.</p>
<p>The RINEX inputs are always deleted, so do not put your only copy of the files in the working directory.
Please note: we are using the publicly available <code>gfzrnx</code> code to convert RINEX 3 files into RINEX 2.11 files.
If you do not have <code>gfzrnx</code> installed, you will not be able to use RINEX 3 files.</p>
<p>I believe it is also allowed to put your
RINEX files into $REFL_CODE/YYYY/rinex/ssss where YYYY is the year
and ssss is the four character station name. The advantage of doing
this is that your RINEX files will not be deleted.</p>
<p>NMEA formats can be translated to SNR using <code>nmea2snr</code>.
Inputs are similar to <code>rinex2snr</code>: 4char station name, year, and day of year
NMEA files are assumed to be stored as:</p>
<p>$REFL_CODE + /nmea/ABCD/2021/ABCD0030.21.A</p>
<p>for station ABCD in year 2021 and day of year 3.</p>
<p>NMEA files may be gzipped.</p>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Dr. Kristine Larson and UNAVCO.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>