<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>quickLook &mdash; gnssrefl  documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> gnssrefl
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../index.html">Welcome to gnssrefl documentation!</a></li>
<li class="toctree-l1"><a class="reference internal" href="understand.html">Understanding</a></li>
<li class="toctree-l1"><a class="reference internal" href="README_install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="func_and_utils_doc.html">Workflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="../source/modules.html">gnssrefl</a></li>
<li class="toctree-l1"><a class="reference internal" href="first_drivethru.html">gnssrefl use cases</a></li>
<li class="toctree-l1"><a class="reference internal" href="news.html">News <a name="news"></a></a></li>
<li class="toctree-l1"><a class="reference internal" href="news.html#bugs-features-a-name-bugs-a">Bugs/Features <a name="bugs"></a></a></li>
<li class="toctree-l1"><a class="reference internal" href="contributions_questions.html">Community and Questions</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">gnssrefl</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
      <li>quickLook <a name="module2"></a></li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/pages/quickLook.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<section id="quicklook-a-name-module2-a">
<h1>quickLook <a name="module2"></a><a class="headerlink" href="#quicklook-a-name-module2-a" title="Permalink to this heading"></a></h1>
<p>Before using <code>gnssir</code>code, I recommend you use <code>quickLook</code>. This allows you
to quickly test various options (elevation angles, frequencies, azimuths, and quality control
parameters). The required inputs are station name, year, and doy of year. <strong>You must have
previously translated a RINEX file using <code>rinex2snr</code> to use quickLook.</strong></p>
<p><CODE>quickLook</code> has stored defaults for analyzing the spectral characteristics of the SNR data.
<strong>In general these defaults are meant to facilitate users where the antenna is less than 5 meters tall.</strong>
If your site is taller than that, you will need to override the defaults.
Similarly, the default elevation angles are 5-25 degrees. If that mask includes a reflection region
you don’t want to use, you need to override them.  For more information, use <code>quickLook -h</CODE></p>
<p>As discussed earlier, there are two QC measures used in <Code>gnssrefl</code>. One is the peak
value of the peak in the periodogram. Secondly it uses a very simple peak to noise ratio (pk2noise)
calculation. In this case the average periodogram amplitude value is calculated for a RH
region that you define. For <code>quickLook</code> it uses the same RH region for the the “noise” region.</p>
<p><strong>Example from Boulder:</strong></p>
<p>We start with one of our <code>rinex2snr</code> examples, <code>p041</code></p>
<p><code>quickLook p041 2020 132 </CODE></p>
<p>That command will produce this periodogram summary:</p>
<img src="https://github.com/kristinemlarson/gnssrefl/blob/master/tests/use_cases/p041-l1.png" width=600>
<p>By default, these are L1 data only. Note that the x-axis does not go beyond 6 meters. This is because
you have used the defaults. Furthermore, note that results on the x-axis begin at 0.5 meters.
Since you are not able to resolve very small reflector heights with this method, this region
is not allowed. These periodograms give you a sense of whether there is a planar reflector below your antenna. The fact that the
peaks in the periodograms bunch up around 2 meters means that at
this site the antenna phase center is ~ 2 meters above the ground. The colors change as you try
different satellites.  If the data are plotted in gray that means you have a failed reflection. The quadrants are Northwest, Northeast and so on.</p>
<p><CODE>quickLook</code> also provides a summary of various quality control metrics:</p>
<img src="https://github.com/kristinemlarson/gnssrefl/blob/master/tests/use_cases/p041_l1_qc.png" width=600>
<p>The top plot shows the sucessful RH retrievals in blue and unsuccessful RH retrievals in gray.
In the center panel are the peak to noise ratios. The last plot is the amplitude of the spectral peak. The dashed
lines show you what QC metrics quickLook was using. You can control/change these on the command line.</p>
<p>If you want to look at L2C data you just change the frequency on the command line. L2C is designated by
frequency 20:</p>
<p><CODE>quickLook p041 2020 132 -fr 20</CODE></p>
<img src="https://github.com/kristinemlarson/gnssrefl/blob/master/tests/use_cases/p041-l2c.png" width=600>
<p><strong>L2C results are always superior to L1 results.</strong> If you have any influence over a GNSS site, please
ask the station operators to track modern GPS signals such as L2C and L5.</p>
<p><strong>Check back for our site on Lake Superior:</strong></p>
<p>Make a SNR file <code>rinex2snr ross 2020 170</code> and <code>quickLook ross 2020 170 -e1 5 -e2 15</code></p>
<img src=https://github.com/kristinemlarson/gnssrefl/blob/master/tests/use_cases/ross-qc.png width=600>
The good RH estimates (in blue in the top panel) are telling us that we were right when we assessed 
reflection zones using 4 meters. We can also see that the best retrievals are in the southeast quadrant (azimuths 90-180 degrees).
This is further emphasized in the next panel, that shows the actual periodograms.
<img src=https://github.com/kristinemlarson/gnssrefl/blob/master/tests/use_cases/ross-lsp.png width=600>
<p><a class="reference external" href="https://github.com/kristinemlarson/gnssrefl/blob/master/tests/use_cases/use_gls1.md"><strong>Example for a site on an ice sheet</strong></a></p>
<p><a class="reference external" href="https://github.com/kristinemlarson/gnssrefl/blob/master/tests/use_cases/use_smm3.md"><strong>Example for a tall site</strong></a></p>
<p>In addition to the <strong>peak2noise</strong> and required amplitude (<strong>ampl</strong>) QC metrics, there is a
couple more QC metrics that are hardwired. One is the length of time
allowed for an arc - this can be a problem when you have an arc that crosses midnite;
since the gnssrefl code works on elevation angle, it will combine part of
the arc from the beginning of the day and the rest
from the end of the day. This is not sensible - and it will reject this arc
nominally for being far too long. Really it is rejecting it because it is non-physical.</p>
<p>The code tries to find all eligible arcs between elevation angles <strong>e1 (emin)</strong> and <strong>e2 (emax)</strong>.
Why? In my experience you don’t want to use an arc that only goes from 5-10 degrees if you
are trying to use all arcs between 5 and 25 degrees. The same is true for small
arcs at higher elevation angles (20-25). However, you don’t want to be
too strict, so there is a QC setting called <strong>ediff</strong>.
The default is 2 degrees. For a given emin and emax for your arcs, <code>quickLook</code>
will allow you to use arcs that are at least within this amount in degrees, i.e.
(emin +ediff) and (emax - ediff). The net result of this QC setting
default is to make it less likely you will try to use a very short arc.
Although this cannot be changed for <code>quickLook</code>, you
can change it in <code>gnssir</code> in your json file. If you want <code>gnssir</code> to use
everything, just make <strong>ediff</strong> very large.</p>
<p>Warning: <code>quickLook</code> calculates the minimum observed elevation
angle in your file and prints that to the screen so you know
what it is. It also uses that as your emin
value (e1) if the default is smaller. It does this so you don’t see all arcs as rejected.
Let’s say your file had a receiver-imposed elevation cutoff
of 10 degrrees. The default minimum elevation angle in <code>quickLook</code> is 5 degrees.
With the default <strong>ediff</strong> value of 2, not a single arc would reach the minimum
required value of 7 (5 + 2); everything
would be rejected. <code>quickLook</code> instead sees that
you have a receiver-imposed minimum of 10 and would substitute that for the default emin.
<code>gnssir</code> does not do this because at that point you
are supposed to have chosen a strategy, which is stored in the json file.</p>
<p><code>quickLook -screenstats True</code> provides more information to the screen
about why arcs have been rejected.</p>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Dr. Kristine Larson and UNAVCO.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>