<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Understanding &mdash; gnssrefl  documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Installation" href="README_install.html" />
    <link rel="prev" title="Welcome to gnssrefl documentation!" href="../index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> gnssrefl
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../index.html">Welcome to gnssrefl documentation!</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Understanding</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#overview">Overview</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#goals"><em>Goals</em></a></li>
<li class="toctree-l3"><a class="reference internal" href="#philosophy"><em>Philosophy</em></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#method">Method</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#signals-and-sources">Signals and Sources</a></li>
<li class="toctree-l3"><a class="reference internal" href="#considerations">Considerations</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="README_install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="func_and_utils_doc.html">Workflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="../source/modules.html">gnssrefl api reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="first_drivethru.html">gnssrefl use cases</a></li>
<li class="toctree-l1"><a class="reference internal" href="news.html">News <a name="news"></a></a></li>
<li class="toctree-l1"><a class="reference internal" href="news.html#bugs-features-a-name-bugs-a">Bugs/Features <a name="bugs"></a></a></li>
<li class="toctree-l1"><a class="reference internal" href="contributions_questions.html">Community and Questions</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">gnssrefl</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Understanding</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/pages/understand.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<section id="understanding">
<h1>Understanding<a class="headerlink" href="#understanding" title="Permalink to this heading"></a></h1>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this heading"></a></h2>
<p><strong>gnssrefl</strong> is an open source/python version of my GNSS interferometric reflectometry (GNSS-IR) code.</p>
<p><em>If you would like to try out reflectometry without installing the code</em></p>
<p>I recommend you use <a class="reference external" href="https://gnss-reflections.org">this web app</a>. It
can show you representative results with minimal constraints. It should provide
results in less than 10 seconds.</p>
<p><em>If you prefer Matlab</em></p>
<p>I had a <a class="reference external" href="https://github.com/kristinemlarson/gnssIR_matlab_v3">working matlab version on github</a>,
but I will not be updating it. You will very likely have to make changes to accommodate the recent
change in security protocols at CDDIS.</p>
<section id="goals">
<h3><em>Goals</em><a class="headerlink" href="#goals" title="Permalink to this heading"></a></h3>
<p>The goal of the gnssrefl python repository is to help you compute (and evaluate) GNSS-based
reflectometry parameters using geodetic data. This method is often
called GNSS-IR, or GNSS Interferometric Reflectometry. There are three main modules:</p>
<ul class="simple">
<li><p><a class="reference internal" href="rinex2snr.html"><span class="doc std std-doc"><strong>rinex2snr</strong></span></a> translates RINEX files into SNR files needed for analysis.</p></li>
<li><p><a class="reference internal" href="gnssir.html"><span class="doc std std-doc"><strong>gnssir</strong></span></a> computes reflector heights (RH) from SNR files.</p></li>
<li><p><a class="reference internal" href="quickLook.html"><span class="doc std std-doc"><strong>quickLook</strong></span></a> gives you a quick (visual) assessment of a file without dealing
with the details associated with <strong>gnssir</strong>. It is not meant to be used for routine analysis.
It also helps you pick an appropriate azimtuh mask and quality control settings.</p></li>
</ul>
<p>There are also various <a class="reference internal" href="utilities.html"><span class="doc std std-doc">utilities</span></a> you might find to be useful.
If you are unsure about why various restrictions are being applied, it is really useful
to read <a class="reference external" href="https://link.springer.com/article/10.1007/s10291-018-0744-8">Roesler and Larson (2018)</a>
or similar. You can also watch some background videos
on GNSS-IR at <a class="reference external" href="https://www.youtube.com/channel/UCC1NW5oS7liG7C8NBK148Bg">youtube</a>.</p>
</section>
<section id="philosophy">
<h3><em>Philosophy</em><a class="headerlink" href="#philosophy" title="Permalink to this heading"></a></h3>
<p>In geodesy, you don’t really need to know much about what you are doing to
calculate a reasonably precise position from GPS data. That’s just the way it is.
(Note: that is also thanks to the hard work of the geodesists that wrote the
computer codes). For GPS/GNSS reflections, you need to know a little bit more - like what are you
trying to do? Are you trying to measure water levels? Then you need to know where the water
is! (with respect to your antenna, i.e. which azimuths are good and which are bad).
Another application of this code is to measure snow accumulation. If you
have a bunch of obstructions near your antenna,
you are responsible for knowing not to use that region. If your antenna is 10 meters
above the reflection area, and the software default only computes answers up to 6 meters,
the code will not tell you anything useful. It is up to you to know what is best for the site and
modify the inputs accordingly.
I encourage you to get to know your site. If it belongs to you, look at
photographs. If you can’t find photographs, use Google Earth.  You can also try using
my <a class="reference external" href="https://gnss-reflections.org/geoid?station=smm3">google maps web app interface</a>.</p>
</section>
</section>
<section id="method">
<h2>Method<a class="headerlink" href="#method" title="Permalink to this heading"></a></h2>
<section id="signals-and-sources">
<h3>Signals and Sources<a class="headerlink" href="#signals-and-sources" title="Permalink to this heading"></a></h3>
<p>To summarize, direct (blue) and reflected (red) GNSS signals interfere and create
an interference pattern that can be observed in GNSS Signal to Noise Ratio (SNR) data as a satellite rises or sets.
The frequency of this interference pattern is directly related to the height of the GNSS antenna phase
center above the reflecting surface, or reflector height RH (purple). <em>The primary goal of this software
is to measure RH.</em> This parameter is directly related to changes in snow height and water levels below
a GNSS antenna. This is why GNSS-IR can be used as a snow sensor and tide gauge. GNSS-IR can also be
used to measure soil moisture, but the code to estimate soil moisture is not as strongly related to RH as
snow and water. We will be posting the code you need to measure soil moisture later in the year.</p>
<p align=center>
<img src="https://gnss-reflections.org/static/images/overview.png" width="500" />
</p>
<p>This code is meant to be used with Signal to Noise Ratio (SNR) data. This is a SNR sample for a site in the
the northern hemisphere (Colorado) and a single GPS satellite. The SNR data are plotted with respect to time - however,
we have also highlighted in red the data where elevation angles are less than 25 degrees. These are the data used in
GNSS Interferometric Reflectometry GNSS-IR. You can also see that there is an overall smooth polynomial signature
in the SNR data. This represents the dual effects of the satellite power transmission level and the antenna
gain pattern. We aren’t interested in that so we will be removing it with a low order polynomial (and
we will convert to linear units on y-axis).</p>
<p align=center>
<img src="../_static/p041-snr.png" width="600"/>
</p>
<p>After that polynomial is removed, we will concentrate on the <em>rising</em>
and <em>setting</em> satellite arcs. That is the red parts on the left and right.</p>
<p>Below you can see those next two steps. On the top is the “straightened” SNR data. Instead of time,
it is plotted with respect to sine of the elevation angle. It was shown a long time ago by Penina
Axelrad that the frequency extracted from these data is representative of the reflector height.
Here a periodogram was used to extract this frequency, and that is shown below, with the x-axis
units changed to reflector height. In a nutshell, that is what this code does. It figures out the
rising and setting satellite arcs in all the azimuth regions you have said are acceptable. It does a
simple analysis (removes the polynomial, changes units) and uses a periodogram to look at the
frequency content of the data. You only want to report RH when you think the peak on the periodogram is
significant. There are many ways to do this - we only use two quality control metrics:</p>
<ul class="simple">
<li><p>is the peak larger than a user-defined value  (amplitude of the dominant peak in your periodogram)</p></li>
<li><p>is the peak divided by a “noise” metric larger than a user-defined value. The code calls this the peak2noise.</p></li>
</ul>
<p align=center>
<img src="../_static/for_the_web.png" width="600"/>
</p>
<p>The Colorado SNR example is for a fairly planar field where the RH for the rising and setting arc
should be very close to the same name. What does the SNR data look like for a more extreme case?
Shown below is the SNR data for <a class="reference external" href="https://gnss-reflections.org/static/images/PBAY.jpg">Peterson Bay</a>, where the rising arc (at low tide) has a very different
frequency than during the setting arc (high tide). This gives you an idea of how the code can be
used to measure tides.</p>
<p align=center>
<img src="../_static/pbay-snr.png" width="600"/>
</p>
</section>
<section id="considerations">
<h3>Considerations<a class="headerlink" href="#considerations" title="Permalink to this heading"></a></h3>
<p>A couple common sense issues: one is that since you define the noise region, if you make it really large, that
will artificially make the peak2noise ratio larger. I have generally used a region of 6-8 meters for this
calculation. So in the figure above the region was for 0-6 meters. The amplitude can be tricky because
some receivers report low SNR values, which then leads to lower amplitudes. The default amplitude values are
for the most commonly used signals in GNSS-IR (L1, L2C, L5, Glonass, Galileo, Beidou). The L2P data
used by geodesists are generally not useable for reasons to be discussed later.</p>
<p>Even though we analyze the data as a function of sine of elevation angle, each satellite arc
is associated with a specific time period. The code keeps track of that and reports it in the final answers.
It also keeps track of the average azimuth for each rising and setting satellite arc that passes quality
control tests.</p>
<p>What do these satellite reflection zones look like? Below are
photographs and <a class="reference external" href="https://gnss-reflections.org/rzones">reflection zone maps</a> for two standard GNSS-IR sites,
one in the northern hemisphere and one in the southern hemisphere.</p>
<p align=center>
<table align=center>
<TR>
<TH>Mitchell, Queensland, Australia</TH>
<TH>Portales, New Mexico, USA</TH>
</TR>
<TR>
<TD><img src=http://gnss-reflections.org/static/images/MCHL.jpg width=300></TD>
<TD><img src=http://gnss-reflections.org/static/images/P038.jpg width=300></TD>
</TR>
<TR>
<TD><img src=../_static/mchl_google.jpg width=300></TD>
<TD><img src=../_static/p038_google.jpg width=300></TD>
</TR>
</table>
</p>
<p>Each one of the yellow/blue/red/green/cyan clusters represents the reflection zone
for a single rising or setting GPS satellite arc. The colors represent different elevation angles -
so yellow is lowest (5 degrees), blue (10 degrees) and so on. The missing satellite signals in the north
(for Portales New Mexico) and south (for Mitchell, Australia) are the result of the GPS satellite
inclination angle and the station latitudes. The length of the ellipses depends on the height of the
antenna above the surface - so a height of 2 meters gives an ellipse that is smaller than one
that is 10 meters. In this case we used 2 meters for both sites - and these are pretty
simple GNSS-IR sites. The surfaces below the GPS antennas are fairly smooth soil and that
will generate coherent reflections. In general, you can use all azimuths at these sites.</p>
<P>
<P>
Now let's look at a more complex case, station <code>ross</code> on Lake Superior. Here the goal 
is to measure water level. The map image (panel A) makes it clear
that unlike Mitchell and Portales, we cannot use all azimuths to measure the lake. To understand our reflection 
zones, we need to know the approximate lake level. That is a bit tricky to know, but the 
photograph (panel B) suggests it is more than the 2 meters we used at Portales - 
but not too tall. We will try 4 meters and then check later to make sure that was a good assumption.  
</P>
<p align=center>
<table align=center>
<TR>
<TD>A. <img src=../_static/ross-google.jpg width=300> <BR>
Map view of station ROSS </TD>
<TD>B. <img src=https://gnss-reflections.org/static/images/ROSS.jpg width=300> <BR>
Photograph of station ROSS</TD>
</TD>
</TR>
<Tr>
<TD>C. <img src=../_static/ross-first.jpg width=300><BR>
Reflection zones for GPS satellites at elevation <BR>angles of 5-25 degrees 
for a reflector height of <BR>4 meters.</TD> 
<TD>D. <img src=../_static/ross-second.jpg width=300><BR>
Reflection zones for GPS satellites at elevation <BR>angles of 5-15 degrees 
for a reflector height of <BR>4 meters.  </TD>
</Tr>
</table>
</p>
<p>Again using the reflection zone web app, we can plot up the appropriate reflection zones for various options.
Since <code>ross</code> has been around a long time, <a class="reference external" href="https://gnss-reflections.org">http://gnss-reflections.org</a> has its coordinates in a
database. You can just plug in <code>ross</code> for the station name and leave
latitude/longitude/height blank. You <em>do</em> need to plug in a RH of 4 since mean
sea level would not be an appropriate reflector height value for this
case. Start out with an azimuth range of 90 to 180 degrees.
Using 5-25 degree elevation angles (panel C) looks like it won’t quite work - and going all the way to 180 degrees
in azimuth also looks it will be problematic. Panel D shows a smaller elevation angle range (5-15) and cuts
off azimuths at 160. These choices appear to be better than those from Panel C.<br />
It is also worth noting that the GPS antenna has been attached to a pier -
and <em>boats dock at piers</em>. You might very well see outliers at this site when a boat is docked at the pier.</p>
<p>Once you have the code set up, it is important that you check the quality of data. This will also
allow you to check on your assumptions, such as the appropriate azimuth and elevation angle
mask and reflector height range. This is one of the reasons <code>quickLook</code> was developed.</p>
<HR></section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../index.html" class="btn btn-neutral float-left" title="Welcome to gnssrefl documentation!" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="README_install.html" class="btn btn-neutral float-right" title="Installation" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Dr. Kristine Larson and UNAVCO.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>