<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Homework 2 Solution &mdash; gnssrefl  documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> gnssrefl
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../pages/understand.html">Understanding</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pages/README_install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pages/func_and_utils_doc.html">Workflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="../source/modules.html">gnssrefl</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pages/first_drivethru.html">gnssrefl Use Cases</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pages/news.html">News <a name="news"></a></a></li>
<li class="toctree-l1"><a class="reference internal" href="../pages/news.html#bugs-features-a-name-bugs-a">Bugs/Features <a name="bugs"></a></a></li>
<li class="toctree-l1"><a class="reference internal" href="../pages/contributions_questions.html">Community and Questions</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">gnssrefl</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Homework 2 Solution</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/homeworks/homework2_soln.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<section id="homework-2-solution">
<h1>Homework 2 Solution<a class="headerlink" href="#homework-2-solution" title="Permalink to this heading"></a></h1>
<p><em>Make SNR file for gls1, 2012, doy 100</em>  quickLook*</p>
<p><code>rinex2snr gls1 2012 100 -archive unavco </code></p>
<p><em>Run quickLook</em></p>
<p><code>quickLook gls1 2012 100</code></p>
<p>This makes two plots.</p>
<img src=hw2_period.png width=500/>
<P>
<img src=hw2_summary.png width=500/>
<p><em>Looking at the QC metrics plots created by <code>quickLook</code>, do you have some ideas on how to change the azimuth mask angles?</em></p>
<p>I’ve outlined in red the areas that consistently produce unsuccessful
retrievals.  Even though it seesm the software is reliably removing them, we can remove
them in the analysis strategy file. Note that the default
peak2noise is 3 in <code>quickLook</code>. This is a bit higher than the gnssir default.</p>
<p><em>Now make SNR files for gls1 for the all of 2012.</em></p>
<p><code>rinex2snr gls1 2012 1 -archive unavco -doy_end 366 -weekly True</code></p>
<p><em>We will next analyze a year of L1 GPS reflection data from gls1. We will use the default minimum and maximum
reflector height values (0.5 and 6 meters). But for the reasons previously stated, you will want to
set a minimum elevation angle of 7 degrees. We also specify that we only want to use the L1 data.</em></p>
<p>If you cannot remember the coordinates of gls1, you can try:</p>
<p><code>query_unr gls1</code></p>
<p>Note: the query_unr code was recently updated to include more precision
for coordinates. This precision is <em>not</em> needed for make_json_input.
Although it is not required, I am going to override the dfeaults for peak2noise and reqamp to mimic what is used by quickLook.</p>
<p><code>make_json_input gls1 66.479391272 -46.310152753 2148.5783167 -l1 True -e1 7 -peak2noise 3 -ampl 8 </code></p>
<p><em>Hand-edit the azimuths in the json file to:</em></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;azval&quot;</span><span class="p">:</span> <span class="p">[</span> <span class="mi">40</span><span class="p">,</span> <span class="mi">90</span><span class="p">,</span> <span class="mi">90</span><span class="p">,</span> <span class="mi">180</span><span class="p">,</span> <span class="mi">180</span><span class="p">,</span> <span class="mi">270</span><span class="p">,</span> <span class="mi">270</span><span class="p">,</span> <span class="mi">330</span> <span class="p">],</span>
</pre></div>
</div>
<p><a class="reference download internal" download="" href="../_downloads/9e556e0f4b8558dcd1b3a274734b9013/gls1.json"><span class="xref download myst">Here is my json file</span></a></p>
<p><em>Now that you have SNR files and json inputs, you can go ahead and
estimate reflector heights for the year 2012 using <code>gnssir</code>.
Note that it is normal to see ‘Could not read the first SNR file:’ because we
only created SNR files once a week.</em></p>
<p><code>gnssir gls1 2012 1 -doy_end 366</code></p>
<p><em>Now you can use the <code>daily_avg</code> tool to compute a daily average reflector height for gls1.
Try setting the median filter to 0.25 meters and individual tracks to 30.</em></p>
<p><code>daily_avg gls1 0.25 30</code></p>
<p>This code produces three plots and a daily average (txt or csv) file. My plots have
every day of 2012 shown beacuse I made SNR files for each day of the year. Yours
will only have one point per week.</p>
<p>This is all the individual RH:</p>
<p>This is the daily average after outliers have been removed:</p>
<p>This lets you know how many arcs went into each day’s average:</p>
<p><em>Note that RH is plotted on the y-axis with RH decreasing rather than increasing. Why do you think we did that?</em></p>
<p>Most people are interested in snow accumulation, so reversing the y-axis accommodates that.</p>
<p><a class="reference download internal" download="" href="../_downloads/0ab71358304d64146683eead1d197d77/gls1_dailyRH.txt"><span class="xref download myst">Here is the text file of the RH result for 2012.</span></a></p>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Dr. Kristine Larson and UNAVCO.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>