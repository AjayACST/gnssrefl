<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Homework 3 &mdash; gnssrefl  documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> gnssrefl
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../pages/understand.html">Understanding</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pages/README_install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pages/func_and_utils_doc.html">Workflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="../source/modules.html">gnssrefl</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pages/first_drivethru.html">gnssrefl Use Cases</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pages/news.html">News <a name="news"></a></a></li>
<li class="toctree-l1"><a class="reference internal" href="../pages/news.html#bugs-features-a-name-bugs-a">Bugs/Features <a name="bugs"></a></a></li>
<li class="toctree-l1"><a class="reference internal" href="../pages/contributions_questions.html">Community and Questions</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">gnssrefl</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Homework 3</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/homeworks/homework3.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<section id="homework-3">
<h1>Homework 3<a class="headerlink" href="#homework-3" title="Permalink to this heading"></a></h1>
<p><strong>Due date:</strong> This homework is to be completed <strong>before</strong> the short course given on October 21. You need to make
sure the software has been properly installed and you have successfully completed the “homework 0” assignment. You should
also read the <a class="reference external" href="https://github.com/kristinemlarson/gnssrefl">gnssrefl documentation provided on GitHub.</a></p>
<p><strong>Purpose:</strong> Learn how to measure water level with <code>gnssrefl</code> using GNSS data</p>
<p><strong>Station:</strong>
We will be using station <strong>ross</strong>. It is operated by <a class="reference external" href="https://www.nrcan.gc.ca">NRCAN</a>.
This <a class="reference external" href="https://webapp.geod.nrcan.gc.ca/geod/data-donnees/cacs-scca.php?locale=en">map</a>
gives you an overview of GNSS stations operated by NRCAN. Use the plus sign on the map
to look more closely at Lake Superior. Find <strong>ross</strong> and click on it (station M023004).
If you scroll down, you will see a photo of the monument.</p>
<p>NRCAN is operating what I would call a “legacy” GNSS instrument. This means it only tracks
the original GPS signals that were designed in the 1970s. This means none of the
enhanced GPS signals (L2C and L5) available since 2005 are provided.
Furthermore, there are no signals from Glonass, Galileo, or Beidou.
The bottom line is that you will be using only the L1 GPS signal, which leaves you with ~15% of what
would be available from a modern multi-GNSS unit. The sample rate - 30 seconds - limits what
kind of reflectometry you can do. For the purposes of this homework, it restricts the RH to values less
than ~10 meters.</p>
<p><strong>Azimuth/Elevation Mask</strong></p>
<p>Next, let’s get an idea of what this site looks like from a reflections viewpoint.
Use the geoid tab on the <a class="reference external" href="https://gnss-reflections.org/geoid">gnss-reflections webapp</a> to
get an idea of its surroundings. You can enter the station coordinates by hand if you know them,
but since <strong>ross</strong> is part of a public archive known to geodesists, coordinates have been stored in the webapp.
Just type in <strong>ross</strong> for the station name. Make a note of the station
latitude, longitude, and ellipsoidal height that is returned by the
webapp because you will need it later. Although the elevation above sea level of
the site is ~186 meters, from the photo you know already this is not the value
we will want to use for our reflections study. We will start with our common
sense, look at the data, and iterate if necessary.</p>
<p>Use the <a class="reference external" href="https://gnss-reflections.org/rzones">reflection zone section of the web app</a> to get an idea
of what reflection zones are possible for this site. We cannot use the default sea level reflection
value, so you need to set a Reflector Height (RH) value. Based on the photograph, try values that
you think are reasonable. You don’t want your reflection zones to cross
a dock or the nearby boats, so you should also rerun it with different azimuth limits. Don’t worry about it too much as we will get feedback from the actual GPS data.</p>
<p>Make a note of:</p>
<UL>
<LI>RH
<LI>elevation angle values that give water coverage without interference from docks/boats
<LI>azimuth angle values that cover open water without interference
<LI>the DECIMAL latitude, longitude, and height (from the geoid webapp).
<LI>we can only use L1 GPS data at this site 
<LI>We can't estimate RH larger than 10 meters because of the sampling rate
</UL>
<p><strong>Using gnssrefl</strong></p>
<p>Now let’s look at the <strong>ross</strong> data. We need to pick up a RINEX file and strip out the
SNR data.  We use the <code>rinex2snr</code> for this purpose.  Use -h if you want to
see the options for this module. We will throw caution to the winds and see if the defaults will work.
The only required inputs are the station name (ross), the year (2020) and day of year (150)
(note: to convert from year and day of year to year,
month, day and vice versa, try the modules <code>ydoy</code> and
<code>ymd</code>).</p>
<p>By default <code>rinex2snr</code> tries to find the RINEX data for you by looking at a few
key archives.  However, if you know where the data are, it will be faster to specify it.
In this case they are available from both sopac and nrcan. Try the <code>-archive</code> option.</p>
<p>Once you have successfully created a SNR file, run <code>quickLook</code>.
You will see two graphical representations of the data. The first is
periodograms for the four geographic quadrants (northwest, northeast, and so on).
You are looking for nice clean (and colorful) peaks. Color means they have
passed Quality Control (QC). Gray lines are satellite tracks that failed QC. The second plot summarizes the
RH retrievals and how the QC metrics look compared to
the defaults. In this case the x-axis is azimuth in degrees.</p>
<p>From these plots, how does the correct <em>RH</em> value compare with the one you assumed earlier when you
were trying out the webapp?  How about the azimuths?  Go back to the reflection zone webapp and
make sure you are happy with your azimuth and elevation angle selections.</p>
<p>Next we need to save our <code>gnssrefl</code> analysis strategy using
<code>make_json_input</code>. At a minimum you need to know
the latitude, longitude, and height for the station. However, your analysis strategy can and should
be improved by setting some parameters on the command line.</p>
<p><em>Hints:</em></p>
<ul class="simple">
<li><p>Check the documentation to see how to set the elevation angles and RH limits on the command line</p></li>
<li><p>Since we can only use L1 data, you should use the <code>-l1 True</code> flag.</p></li>
<li><p>You will need to hand edit the azimuths in the json file. You want
to cut up your azimuth range in 60-90 degree chunks.  So if you wanted to use the region
for 90-270 degrees, you should say 90-180
and 180-270. You can use smaller chunks, but I generally do not use less than 45 degree azimuth chunks.</p></li>
</ul>
<p>Now run <code>gnssir</code> for the year 2020/doy 150.
This module is meant for <em>routine analysis</em> and thus there are not a lot
of bells and whistles. However, it is good practice to see that something is actually
created (the screen output will tell you where it is).</p>
<p><strong>Extra Credit:</strong></p>
<p>The <code>gnssir</code> output tells you the vertical distance between the GPS antenna and
the lake for each successful satellite track. That is not
super exciting; it is a little more interesting to see if it changes over time, which means
you need to analyze a bit more data.</p>
<ul class="simple">
<li><p>use <code>rinex2snr</code> to make SNR files for the same year, but now do doy 120 through 290. Remember to use <code>-doy_end</code> to
do that in a single command.  And use <code>-weekly True</code> to make fewer files (which will make
everything much faster).  Why did I pick those dates? Mostly to avoid snow (yeap, it snows up there!)</p></li>
<li><p>run <code>gnssir</code> for those dates.  You do not need the weekly option here - you can just
specify 120 through 290. It will look for every day, but if it doesn’t find it, it just looks for the
next day, etc.</p></li>
<li><p>You can now use the <code>daily_avg</code> to make a daily average for the lake level on each day
you analyzed.</p></li>
</ul>
<p><strong>Extra Extra Credit:</strong></p>
<p>Compare your results with the <a class="reference external" href="https://www.isdm-gdsi.gc.ca/isdm-gdsi/twl-mne/inventory-inventaire/sd-ds-eng.asp?no=10220&amp;user=isdm-gdsi&amp;region=CA">lake gauge data.</a></p>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Dr. Kristine Larson and UNAVCO.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>