<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Michipicoten, Lake Superior &mdash; gnssrefl  documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> gnssrefl
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../index.html">Welcome to gnssrefl documentation!</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pages/understand.html">Understanding</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pages/README_install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pages/func_and_utils_doc.html">Workflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="../source/modules.html">gnssrefl</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pages/first_drivethru.html">gnssrefl use cases</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pages/news.html">News <a name="news"></a></a></li>
<li class="toctree-l1"><a class="reference internal" href="../pages/news.html#bugs-features-a-name-bugs-a">Bugs/Features <a name="bugs"></a></a></li>
<li class="toctree-l1"><a class="reference internal" href="../pages/contributions_questions.html">Community and Questions</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">gnssrefl</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Michipicoten, Lake Superior</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/use_cases/use_mchn.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<section id="michipicoten-lake-superior">
<h1>Michipicoten, Lake Superior<a class="headerlink" href="#michipicoten-lake-superior" title="Permalink to this heading"></a></h1>
<p><strong>Station Name:</strong> 	mchn</p>
<p><strong>Location:</strong> Michipicoten Harbor, Ontario, Canada</p>
<p><strong>Archive:</strong>  <a class="reference external" href="http://sopac-csrc.ucsd.edu/index.php/sopac/">SOPAC</a></p>
<p><strong>Ellipsoidal Coordinates:</strong></p>
<ul class="simple">
<li><p>Latitude: 47.961</p></li>
<li><p>Longitude: -84.901</p></li>
<li><p>Height: 152.019 m</p></li>
</ul>
<p><a class="reference external" href="https://webapp.geod.nrcan.gc.ca/geod/data-donnees/station/report-rapport.php?id=M093001">Station Page at Natural Resources Canada</a></p>
<p><a class="reference external" href="http://geodesy.unr.edu/NGLStationPages/stations/MCHN.sta">Station Page at Nevada Geodetic Laboratory</a></p>
<p><a class="reference external" href="https://goo.gl/maps/mU5GbsvMsLfe5buQ7">Google Maps Link</a></p>
<p align=center>
<img src="mchn_monu-cors.png" width="500"/>
</P>
</section>
<section id="data-summary">
<h1>Data Summary<a class="headerlink" href="#data-summary" title="Permalink to this heading"></a></h1>
<p>Station mchn is operated by <a class="reference external" href="https://www.nrcan.gc.ca/home">NRCAN</a>.
The station overlooks Lake Superior in a favorable location for measuring seasonal water levels.
This site only tracks legacy GPS signals.</p>
<p>More information on mchn can be obtained
from the <a class="reference external" href="https://gnss-reflections.org/api?example=mchn">GNSS-IR Web App</a>,
where mchn is one of the test cases.</p>
<p>For GNSS reflectometry, you need to set an azimuth and elevation angle mask.
The azimuths are chosen to ensure that the reflected signals reflect off the surface of interest.
<a class="reference external" href="https://gnss-reflections.org/rzones?station=mchn&amp;msl=on&amp;RH=7&amp;eang=2&amp;azim1=80&amp;azim2=180">Here is a good start on an elevation and azimuth angle mask</a>.</p>
</section>
<section id="reproduce-the-web-app">
<h1>Reproduce the Web App<a class="headerlink" href="#reproduce-the-web-app" title="Permalink to this heading"></a></h1>
<p><strong>Make SNR File</strong></p>
<p>If you know where the data are stored (i.e. sopac), it is better (faster) to set that flag.
Since the receiver only tracks GPS signals, there is no need to specify gnss orbits.</p>
<p><code>rinex2snr mchn 2019 205 -archive sopac</code></p>
<p><strong>Take a Quick Look at the Data</strong></p>
<p>Examine the spectral characteristics of the SNR data for the default settings
<a class="reference internal" href="../pages/quickLook_desc.html"><span class="doc std std-doc">(For details on quickLook output.)</span></a>:</p>
<p><code>quickLook mchn 2019 205</code></p>
<a class="reference internal image-reference" href="../_images/mchn-example.png"><img alt="../_images/mchn-example.png" src="../_images/mchn-example.png" style="width: 600px;" /></a>
<p>Why does this not look like the results from the web app? Look closely at the station photo and the x-axis
of the periodograms, then change the range of reflector heights at the command line for <strong>quickLook</strong>:</p>
<p><code>quickLook mchn 2019 205 -h1 2 -h2 8</code></p>
<a class="reference internal image-reference" href="../_images/qc-mchn-1.png"><img alt="../_images/qc-mchn-1.png" src="../_images/qc-mchn-1.png" style="width: 600px;" /></a>
<p>Also look at the QC metrics:</p>
<a class="reference internal image-reference" href="../_images/qc-mchn-2.png"><img alt="../_images/qc-mchn-2.png" src="../_images/qc-mchn-2.png" style="width: 600px;" /></a>
<p>The water is ~6.5 meters below the antenna. You can see from the top plot that the good retrievals (in blue)
very clearly show you which azimuths are acceptable and which are not.  The middle plot shows the peak to noise
ratio, which we would like to at least exceed 3. And here again, the bad retrievals are always below this level.
The amplitudes in the bottom plot indicate that 8 is an acceptable minimal value.</p>
</section>
<section id="analyze-the-data">
<h1>Analyze the Data<a class="headerlink" href="#analyze-the-data" title="Permalink to this heading"></a></h1>
<p>The data from 2013 will be analyzed here as a test case.  Begin by generating the SNR files:</p>
<p><code>rinex2snr mchn 2013 1 -archive sopac -doy_end 365 </code></p>
<p>The resulting SNR files are stored in $REFL_CODE/2013/snr/mchn.</p>
<p>Analysis parameters are set up with <code>make_json_input</code></p>
<p><code>make_json_input mchn 47.961 -84.901 152.019 -h1 3 -h2 10 -e1 5 -e2 25 -l1 True -peak2noise 3 -ampl 8</code></p>
<p><a class="reference download internal" download="" href="../_downloads/a1c22b9b0f2aa9933bde6364490e0371/mchn.json"><span class="xref download myst">Sample json file</span></a> While most of the analysis settings can be done by the command
line, you can see that the azimuths have been set by
hand to be limited to 80-180 degrees. Although it is possible to get good reflections beyond
180 degrees, the photographs suggest barriers are present in that region.</p>
<p>Now that the analysis parameters are set, run <code>gnssir</code> to save the reflector height (RH) output for each day in 2013.</p>
<p><code>gnssir mchn 2013 1 -doy_end 365</code></p>
<p>The daily output files are stored in $REFL_CODE/2013/results/mchn. <span class="xref myst">Here is an example output for a single day.</span>
Plots of SNR data can be seen with the -plt option.</p>
<p><code>gnssir mchn 2013 195  -plt True</code></p>
<a class="reference internal image-reference" href="../_images/mchn-g-l1.png"><img alt="../_images/mchn-g-l1.png" src="../_images/mchn-g-l1.png" style="width: 500px;" /></a>
<p>For a lake, it is appropriate to use the daily average. Our utility for computing a daily average requires a value
for the median filter and a minimum number of tracks.  If the median value is set to the be large (2 meters), you can see
large outliers:</p>
<p><code>daily_avg mchn 2 10</code></p>
<a class="reference internal image-reference" href="../_images/mchn_1.png"><img alt="../_images/mchn_1.png" src="../_images/mchn_1.png" style="width: 500px;" /></a>
<p>A more reasonable result is obtained with a 0.25-meter median filter and the 12-track requirement. If you want to save
the daily averages to a specific file, use the -txtfile option. Otherwise it will use a default location (which is printed to the screen)</p>
<p><code>daily_avg mchn 0.25 12 -txtfile mchn-dailyavg.txt</code></p>
<a class="reference internal image-reference" href="../_images/mchn_3.png"><img alt="../_images/mchn_3.png" src="../_images/mchn_3.png" style="width: 500px;" /></a>
<p><a class="reference download internal" download="" href="../_downloads/358beec387886df5b3935145660723a1/mchn-dailyavg.txt"><span class="xref download myst">Sample daily average RH file.</span></a></p>
<p>The number of tracks required will depend on the site. Here the azimuth is restricted because  of the location of the antenna.
Please note that these reflections are from ice in the winter and water during the summer. Surface
bias corrections (ice, snow) will be implemented in the software in the future. Until then, please take
this into account when interpreting the results.</p>
<p>There is a <a class="reference external" href="https://tides.gc.ca/eng/Station/Month?sid=10750">tide gauge</a> at this site. The data can be
downloaded from <a class="reference external" href="http://www.isdm-gdsi.gc.ca/isdm-gdsi/twl-mne/inventory-inventaire/interval-intervalle-eng.asp?user=isdm-gdsi&amp;region=CA&amp;tst=1&amp;no=10750">this link</a>.
Please select the daily mean water level, as there are restrictions on hourly data (more information is available on the download page).
We have downloaded <a class="reference download internal" download="" href="../_downloads/14945ad5127839d5a2fa646a32198508/10750-01-JAN-2013_slev.csv"><span class="xref download myst">the 2013 data</span></a>.</p>
<p>The water levels measured by the traditional tide gauge and GNSS-IR are shown here:</p>
<a class="reference internal image-reference" href="../_images/mchn-timeseries-tide-rh.png"><img alt="../_images/mchn-timeseries-tide-rh.png" src="../_images/mchn-timeseries-tide-rh.png" style="width: 600px;" /></a>
<p>The linear regression between the two series gives a slope m=-1.03. The rms of the
residuals is very good, 0.025 m.</p>
<a class="reference internal image-reference" href="../_images/mchn-linreg.png"><img alt="../_images/mchn-linreg.png" src="../_images/mchn-linreg.png" style="width: 600px;" /></a>
<p>The <a class="reference download internal" download="" href="../_downloads/a94b173a0000685c12743bd71753152e/plotmchn.py"><span class="xref download myst">python script</span></a> used to generate these plots is provided.</p>
</section>
<section id="reference">
<h1>Reference<a class="headerlink" href="#reference" title="Permalink to this heading"></a></h1>
<p>DFO (2021). Institute of Ocean Sciences Data Archive. Ocean Sciences Division. Department of Fisheries and Oceans
Canada. http://www.pac.dfo-mpo.gc.ca/science/oceans/data-donnees/index-eng.html. Data obtained on 2021-01-28.</p>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Dr. Kristine Larson and UNAVCO.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>