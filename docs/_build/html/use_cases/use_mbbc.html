<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>&lt;no title&gt; &mdash; gnssrefl  documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> gnssrefl
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../index.html">Welcome to gnssrefl documentation!</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pages/understand.html">Understanding</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pages/README_install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pages/func_and_utils_doc.html">Workflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="../source/modules.html">gnssrefl api reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pages/first_drivethru.html">gnssrefl use cases</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pages/news.html">News <a name="news"></a></a></li>
<li class="toctree-l1"><a class="reference internal" href="../pages/news.html#bugs-features-a-name-bugs-a">Bugs/Features <a name="bugs"></a></a></li>
<li class="toctree-l1"><a class="reference internal" href="../pages/contributions_questions.html">Community and Questions</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">gnssrefl</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
      <li>&lt;no title&gt;</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/use_cases/use_mbbc.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<p><strong>Mbamba Bay on Lake Malawi</strong></p>
<p>Station name: MBBC</p>
<P align=center>
<img src=mbbc-three.png>
<P>
<p><strong>Latitude:</strong> -11.2736 degrees</p>
<p><strong>Longitude:</strong> 34.8002 degrees</p>
<p><strong>Ellipsoidal Ht:</strong> 522 meters</p>
<p><strong>Data archive:</strong> <a class="reference external" href="https://www.unavco.org/data/gps-gnss/data-access-methods/dai1/ps.php?sid=6429&amp;filter_data_availability=&amp;from_date=1980-01-06&amp;to_date=2022-07-20&amp;parent_link=Permanent&amp;pview=original">UNAVCO</a></p>
<p><a class="reference external" href="http://geodesy.unr.edu/NGLStationPages/stations/MBBC.sta"><strong>Nevada Reno</strong></a></p>
<P>
<p><strong>Getting Started</strong></p>
<p>The first thing you need to do is find out if it is at all possible that you will be able to measure
reflections from Lake Malawi. The place to start is the reflection zone web app.
<a class="reference external" href="http://gnss-reflections.org/rzones?station=mbbc&amp;lat=0.0&amp;lon=0.0&amp;height=0.0&amp;msl=off&amp;RH=20&amp;freq=1&amp;nyquist=0&amp;srate=30&amp;eang=1&amp;azim1=0&amp;azim2=360&amp;system=gps">I initially input a RH value of 20 meters and default elevation angles to get started.</a>.
Do the reflection zones hit the surface of the lake using those inputs? Iterate on
both of the RH and elevation angles until your ellipses overlap the lake. Then try different azimuth restrictions.
Please keep in mind, this would not work at all with 30 sec data sampling. This only works because the PIs
were using a 15 second data rate at MBBC. If you want to check out the Nyquist for this site (i.e. what sampling
rate is required to see Lake Malawi), please click the appropriate button on the reflection zone page.</p>
<p><strong>Testing the data from Lake Malawi</strong></p>
<p>First download and translate RINEX data:</p>
<p><code>rinex2snr mbcc 2021 1 -archive unavco</code></p>
<p>Note that we do not have to select multi-GNSS orbits as this site is only collecting GPS data.</p>
<p>Based on the reflection app, what kind of RH, azimuth, and elevation angle limits are appropriate?</p>
<p><code>quickLook mbbc 2021 1 -e1 4 -e2 10 -h1 50 -h2 70 </code></p>
<img alt="use_cases/mbbc-50-70.png" src="use_cases/mbbc-50-70.png" />
<p>I have manually added a red box to show the good azimuths. Can you use the L2 data at this site? Letâ€™s see:</p>
<p><code> quickLook mbbc 2021 1 -e1 4 -e2 10 -h1 50 -h2 70 -azim1 220 -azim2 275 -fr 2</code></p>
<img alt="use_cases/mbbc-l2.png" src="use_cases/mbbc-l2.png" />
<p>So you can see there are good RH results at the same azimuths as with L1, but they
are marked as bad (gray circles) because the amplitudes are so small. So you need to more or
less turn off the amplitude restriction for L2. You are allowed to have different amplitude constraints
on L1 and L2. Note: the L2 amplitudes are smaller because the receiver lacks access to the P code.</p>
<p><strong>Analyze a Multi-year Dataset</strong></p>
<p>Step 1: Run <code>make_json_input</code> using the information I discussed earlier</p>
<ul class="simple">
<li><p>azimuth angle limits</p></li>
<li><p>elevation angle limits</p></li>
<li><p>RH limits.</p></li>
<li><p>the NReg to be the same as the RH limits</p></li>
<li><p>amplitude limits to be small for L2</p></li>
<li><p>allow L1 and L2</p></li>
<li><p>since MBBC is in the Nevada Reno database, you do not have to provide lat/lon/ht. Simply put 0,0,0 for those entries.</p></li>
</ul>
<p>Note: I usually tell people to use L2C instead of L2. This information is
not available in this dataset - either because the PIs did not track L2C or because it is not provided by UNAVCO.</p>
<p>Step 2: Make SNR files using <code>rinex2snr</code>.</p>
<p>Step 3: Compute reflector heights</p>
<p><code>gnssir mbbc 2018 1 -year_end 2021 -doy_end 100</code></p>
<p>Step 4: Use <code>daily_avg</code> to create a daily average RH. Play with
the inputs (median filter value, number of required RH to compute a reliable average) to make sure
that you have a high quality results.</p>
<p align=center>
<img src=mbbc-rh.png>
<p>
<p><a class="reference external" href="https://www.psmsl.org/data/gnssir/site.php?id=10318">Simon Williams and the Permanent Service for Mean Sea Level have analyzed this full dataset</a></p>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Dr. Kristine Larson and UNAVCO.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>