<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Test the code on a longer dataset from the Ross Ice Shelf &mdash; gnssrefl  documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> gnssrefl
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../pages/understand.html">Understanding</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pages/README_install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pages/func_and_utils_doc.html">Workflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="../source/modules.html">gnssrefl API Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pages/first_drivethru.html">gnssrefl Use Cases</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pages/news.html">News <a name="news"></a></a></li>
<li class="toctree-l1"><a class="reference internal" href="../pages/news.html#bugs-features-a-name-bugs-a">Bugs/Features <a name="bugs"></a></a></li>
<li class="toctree-l1"><a class="reference internal" href="../pages/contributions_questions.html">Community and Questions</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">gnssrefl</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Test the code on a longer dataset from the Ross Ice Shelf</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/use_cases/lorg_use.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<section id="test-the-code-on-a-longer-dataset-from-the-ross-ice-shelf">
<h1>Test the code on a longer dataset from the Ross Ice Shelf<a class="headerlink" href="#test-the-code-on-a-longer-dataset-from-the-ross-ice-shelf" title="Permalink to this heading"></a></h1>
<p>Now we will look at a station called lorg. This site is on the Ross Ice Shelf, Antarctica. The data are archived at UNAVCO.</p>
<p>Get some coordinates for the site, either lat,long,ht or XYZ.
Use the <a class="reference external" href="https://www.unavco.org/data/gps-gnss/data-access-methods/dai2/app/dai2.html#4Char=LORG;scope=Station;sampleRate=both;4CharMod=contains">UNAVCO DAI</a> if you like. Or you can try the <a class="reference external" href="http://geodesy.unr.edu/NGLStationPages/stations/LORG.sta">Nevada Reno site</a>.
The coordinates do not have to be super precise (within 100 meters is fine).</p>
<p><strong>Exercise for the reader:</strong> It is always nice to have a photograph of site. Try to
get a photograph of lorg from the UNAVCO website. If you cannot find it at there,
email dmencin&#64;unavco.org and ask him to post it.</p>
<p>lorg is an example station on my webapp. <a class="reference external" href="https://gnss-reflections.org/fancy6?example=lorg">Please note that the app will be analyzing data in
real-time, so you need to wait for the answers to “pop” up in the left hand side of the page. It takes 5-10
seconds</a>. You might save the periodogram of results so you have a
better idea of what the reflection characteristics of the site.</p>
<p>You need to make some snr files. This time we will do eight months or so.
And we will restrict the search to the unavco archive to make the code run faster (otherwise it will check
four archives). Here I say fortran is False, but of course if you have installed gpsSNR.e, you can
use it and the exercise will run faster.</p>
<p><em>rinex2snr lorg 2019 1 -doy_end 233 -fortran False -archive unavco</em></p>
<p>If you want to look at the contents of a SNR file, they are stored in $REFL_CODE/2019/snr/lorg</p>
<p>I recommend that you use <strong>quickLook</strong> for one file. This gives you an idea of the quality of the site.</p>
<p><em>quickLook lorg 2019 1</em></p>
<p>This will produce a reflection periodogram for the L1 data.
Compare the periodograms for frequencies 1, 20 (L2C) and 5. It should be simlar to the webapp periodogram except that the peaks in the periodogram
will be in a different place depending on how much snow has accumulated at this site.</p>
<p>Now let’s get ready to run <strong>gnssir</strong>. This is the code that saves the RH output.
First you need to make a set of file instructions. If you use defaults, you only
need the station name, lat, lon, and ht. Make this file using <strong>make_json_input</strong>.
The json output will be stored in $REFL_CODE/input/lorg.json.
<a class="reference download internal" download="" href="../_downloads/ccce6631776d5e3501b78c4461a39c45/lorg.json"><span class="xref download myst">Here is a sample.</span></a></p>
<p>Run <strong>gnssir</strong> for all the SNR files you made in the previous section.</p>
<p><em>gnssir lorg 2019 1 -doy_end 233</em></p>
<p>The code will tell you which satellites it is looking at and give you an overview for
the estimated reflector heights. You can turn off these statistics in the json (screenstats).
Or from the command line:</p>
<p><em>gnssir lorg 2019 1 -doy_end 233 -screenstats False</em></p>
<p>The default does not send any plots to the screen - and you definitely do not want to see all those plots
if you are analyzing 233 days of data. But if you want to look at the plots for a single day, that is an option in the json
and at the command line:</p>
<p><em>gnssir lorg 2019 1 -screenstats False -plt True</em></p>
<p>Unlike <strong>quickLook</strong>, here you get the periodograms for each frequency all together. To see the next frequency, you need to eliminate the current plot, etc.</p>
<p>We can certainly clean these results up by eliminating various azimuths and requiring stronger peaks in the periodograms.
But for now, let’s just use defaults.
The reflector height results are stored in $REFL_CODE/2019/results/lorg. You can concatenate
the daily files and create your own daily average values (which is what is appropriate for this site), or you can
use <strong>daily_avg</strong>. To avoid using outliers in these daily averages, a median filter is set.  I recommend
0.25 m and ReqTrack of 50 at this site.</p>
<p><em>daily_avg lorg 0.25 50</em></p>
<p>The first plot is <span class="xref myst">all the data</span> (and very colorful). Once you delete it,
the second plot - the daily average - is shown:</p>
<a class="reference internal image-reference" href="use_cases/lorg_2.png"><img alt="use_cases/lorg_2.png" src="use_cases/lorg_2.png" style="width: 500px;" /></a>
<p>There are also optional inputs for saving a text file of the daily averages.
The plot is stored at $REFL_CODE/Files/lorg_RH.png
This is not yet perfect - as there are some outliers which I have circled in red for you.
But it is an excellent example of how easy it is to use the default gnssrefl code to estimate snow accumulation in Antarctica.</p>
<p>In this exercise you used L1, L2C, and L5 signals (i.e. only GPS data). Your reflector heights (RH) are telling you
about snow accumulation changes at lorg. You should notice that when I plot RH, I reverse the y-axis so
as RH gets smaller, that means the snow layer is increasing.</p>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Dr. Kristine Larson and UNAVCO.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>